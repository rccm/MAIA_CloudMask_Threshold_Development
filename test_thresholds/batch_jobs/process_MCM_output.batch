#!/bin/bash
#SBATCH --job-name='process_results'
#SBATCH -p sesempi
#SBATCH --time=05:00:00
#SBATCH --mem-per-cpu=16gb
#SBATCH -n 46
#SBATCH --mail-type=FAIL
#SBATCH --mail-type=END
#SBATCH --mail-user=vllgsbr2@illinois.edu
#SBATCH --error='process_results.err'

##goto working directory
cd /data/keeling/a/vllgsbr2/c/MAIA_thresh_dev/MAIA_CloudMask_Threshold_Development/test_thresholds/

for num_SIDs in {4..29}
do
    if [$num_SIDs -ne 29]
    then
        echo "producing confusion matricies of MCM v.s. MOD35 for each scene"
        mpirun -n 46 python make_confusion_matrix.py $num_SIDs &
        wait

        echo "calculating avg accuracy of scenes by DOY"
        python calc_group_and_scene_accuracy.py $num_SIDs &
        wait
    else

      echo "producing confusion matricies of MCM v.s. MOD35 for each scene"
      mpirun -n 46 python make_confusion_matrix.py $num_SIDs &
      wait

      echo "calculating avg accuracy of scenes by DOY"
      python calc_group_and_scene_accuracy.py $num_SIDs

    fi

done

exit 0
